# Data Leakage Analysis Report
## Corner Kick Shot Outcome Prediction
---

## Section A: Critical Leakage (MCC > 0.7)

**MUST REMOVE IMMEDIATELY**

| Feature | MCC | MI Score | RF Importance | Reasoning |
|---------|-----|----------|---------------|------------|
| is_shot_assist | 0.649 | 0.181 | 0.3329 | By definition only true if NEXT event is shot - direct target leakage |
| has_recipient | 0.272 | 0.040 | 0.0533 | Only labeled after ball successfully reaches someone |
| duration | 0.108 | 0.010 | 0.0312 | Event duration - how long until next event occurs |

## Section B: Strong Suspicion (MCC 0.3-0.7)

**Requires manual inspection**

| Feature | MCC | MI Score | RF Importance | Recommendation |
|---------|-----|----------|---------------|----------------|
| No suspicious features detected | | | | |

## Section C: Safe Features (MCC < 0.3)

**Confirmed t=0 features - can use without concern**

Total safe features: **40**

<details>
<summary>Click to expand safe features list</summary>

- `pass_end_x` (MCC: -0.137)
- `is_outswinging` (MCC: 0.133)
- `pass_length` (MCC: 0.126)
- `is_cross_field_switch` (MCC: 0.094)
- `pass_angle` (MCC: -0.085)
- `recent_subs_5min` (MCC: 0.083)
- `attacking_centroid_x` (MCC: -0.065)
- `is_inswinging` (MCC: -0.064)
- `attacking_near_goal` (MCC: -0.064)
- `corner_side` (MCC: 0.062)
- `attacking_centroid_y` (MCC: 0.060)
- `period` (MCC: 0.057)
- `defending_compactness` (MCC: -0.055)
- `defending_centroid_y` (MCC: 0.053)
- `total_subs_before` (MCC: 0.048)
- `minute` (MCC: 0.034)
- `defending_team_goals` (MCC: 0.030)
- `defending_near_goal` (MCC: 0.029)
- `defending_in_box` (MCC: 0.026)
- `defending_density` (MCC: 0.026)
- `attacking_team_goals` (MCC: 0.025)
- `attacking_to_goal_dist` (MCC: 0.018)
- `timestamp_seconds` (MCC: 0.018)
- `attacking_in_box` (MCC: 0.016)
- `attacking_density` (MCC: 0.016)
- `total_attacking` (MCC: 0.016)
- `second` (MCC: 0.016)
- `keeper_distance_to_goal` (MCC: 0.013)
- `defending_depth` (MCC: -0.010)
- `numerical_advantage` (MCC: 0.007)
- `num_defending_keepers` (MCC: 0.007)
- `pass_end_y` (MCC: -0.006)
- `attacker_defender_ratio` (MCC: -0.006)
- `defending_centroid_x` (MCC: -0.002)
- `defending_to_goal_dist` (MCC: -0.002)
- `score_difference` (MCC: 0.001)
- `match_situation` (MCC: 0.001)
- `num_attacking_keepers` (MCC: -0.001)
- `total_defending` (MCC: 0.000)
- `minutes_since_last_sub` (MCC: 0.000)

</details>

## Section D: Revised Feature Set

### Clean Feature Set (Remove all critical leakage)

**Total clean features: 40** (from 61 original)

**Features removed: 8**

### Expected Impact

- **Performance drop**: Expect significant drop in accuracy/AUC after removing leaked features
- **If performance remains high**: Remaining features may still have leakage
- **Target baseline**: MCC ~0.1-0.2 is realistic for non-leaked features

### Suggested Alternative Features to Engineer

Since leaked features must be removed, consider these legitimate alternatives:

1. **Historical team performance** - Past corner success rate
2. **Player skill ratings** - Corner taker historical accuracy
3. **Tactical patterns** - Common formations from freeze-frame
4. **Pressure metrics** - Defensive pressure intensity
5. **Spatial entropy** - Player distribution randomness

## Summary Statistics

- Total features analyzed: 43
- Critical leakage: 3
- Strong suspicion: 0
- Safe features: 40

---
*Report generated by analyze_data_leakage.py*
